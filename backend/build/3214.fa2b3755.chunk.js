"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[3214],{13214:(w,C,t)=>{t.r(C),t.d(C,{default:()=>xe});var e=t(53547),f=t(89548),v=t(1784),j=t(53603),x=t.n(j),d=t(41580),m=t(86896),n=t(29759);const P=async()=>{try{return await(0,v.WY)(`/${x()}/component`,{method:"GET"})}catch{return null}},A=async()=>{try{return await(0,v.WY)(`/${x()}/content-types`,{method:"GET"})}catch{return null}},I=async()=>{try{return(await(0,v.WY)(`/${x()}/component`,{method:"POST"},!0)).json()}catch{return null}};var M=t(11047),l=t(32064),a=t(75515),u=t(89722),r=t(38939),i=t(8060),g=t(79031),y=t(37909),b=t(15234),T=t(96315),R=t(27589),S=t(7681),O=t(3566),U=t(29728),de=t(19306),ie=t(42866),ce=t(24969),ue=t(59946),ge=t(36856),me=t(58283),G=t(45349);const Q=t(97585).Z,V=({item:o})=>{const[c,h]=(0,e.useState)(!0),[B,L]=(0,e.useState)(!0),[k,W]=(0,e.useState)(!0),[D,Z]=(0,e.useState)(!0),[F,K]=(0,e.useState)(!0),[X,q]=(0,e.useState)(!0),[_,ee]=(0,e.useState)(!0),[te,ae]=(0,e.useState)(!0),[ne,le]=(0,e.useState)(!0),[se,oe]=(0,e.useState)(!0),[Y,re]=(0,e.useState)(null),[Me,z]=(0,e.useState)(!1),{formatMessage:E}=(0,m.Z)();(0,e.useEffect)(()=>{(async()=>{const p=await Q.get();re(p)})()},[]);const Ce=s=>{const p=Y[o?.uid];h(p?.seoChecks?.metaTitle),L(p?.seoChecks?.metaDescription),W(p?.seoChecks?.metaRobots),Z(p?.seoChecks?.metaSocial),K(p?.seoChecks?.wordCount),q(p?.seoChecks?.canonicalUrl),ee(p?.seoChecks?.keywordDensity),ae(p?.seoChecks?.structuredData),le(p?.seoChecks?.alternativeText),oe(p?.seoChecks?.lastUpdatedAt),z(N=>!N)},Pe=s=>{const p={...Y,[o?.uid]:{collectionName:Y[o?.uid]?.collectionName,seoChecks:{metaTitle:c,metaDescription:B,metaRobots:k,metaSocial:D,wordCount:F,canonicalUrl:X,keywordDensity:_,structuredData:te,alternativeText:ne,lastUpdatedAt:se}}};Q.set(p).then(async()=>{re(p),z(N=>!N)})};return e.createElement(e.Fragment,null,e.createElement(U.z,{variant:"tertiary",startIcon:e.createElement(me.Z,null),onClick:s=>Ce(s)},E({id:(0,n.O)("SEOPage.info.config"),defaultMessage:"Settings"})),Me&&e.createElement(ie.P,{onClose:()=>z(s=>!s),labelledBy:"title"},e.createElement(ce.x,null,e.createElement(a.Z,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},E({id:(0,n.O)("SEOPage.info.settings"),defaultMessage:"Settings"}))),e.createElement(ue.f,null,e.createElement(d.x,{paddingBottom:8,paddingTop:4},e.createElement(v.Y_,{title:E({id:"Information",defaultMessage:"Information"}),subtitle:E({id:(0,n.O)("HomePage.info.settings.information"),defaultMessage:"Disable SEO checks for this specific content-type."}),icon:e.createElement(G.Z,null),iconBackground:"primary100"})),e.createElement(de.M,null,e.createElement(d.x,{padding:4,hasRadius:!0,background:"neutral0"},e.createElement(S.K,{horizontal:!0,spacing:4,padding:3},e.createElement(O.r,{label:"Switch",selected:c,onChange:()=>h(s=>!s)}),e.createElement(a.Z,{variant:"delta"},E({id:(0,n.O)("SEOPage.info.settings.meta-title-check"),defaultMessage:"Meta Title"})))),e.createElement(d.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(S.K,{horizontal:!0,spacing:4,padding:3},e.createElement(O.r,{label:"Switch",selected:B,onChange:()=>L(s=>!s)}),e.createElement(a.Z,{variant:"delta"},E({id:(0,n.O)("SEOPage.info.settings.meta-description-check"),defaultMessage:"Meta Description"})))),e.createElement(d.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(S.K,{horizontal:!0,spacing:4,padding:3},e.createElement(O.r,{label:"Switch",selected:k,onChange:()=>W(s=>!s)}),e.createElement(a.Z,{variant:"delta"},E({id:(0,n.O)("SEOPage.info.settings.meta-robots-check"),defaultMessage:"Meta Robots"})))),e.createElement(d.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(S.K,{horizontal:!0,spacing:4,padding:3},e.createElement(O.r,{label:"Switch",selected:D,onChange:()=>Z(s=>!s)}),e.createElement(a.Z,{variant:"delta"},E({id:(0,n.O)("SEOPage.info.settings.meta-social-check"),defaultMessage:"Meta Social"})))),e.createElement(d.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(S.K,{horizontal:!0,spacing:4,padding:3},e.createElement(O.r,{label:"Switch",selected:F,onChange:()=>K(s=>!s)}),e.createElement(a.Z,{variant:"delta"},E({id:(0,n.O)("SEOPage.info.settings.word-count-check"),defaultMessage:"Word Count"})))),e.createElement(d.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(S.K,{horizontal:!0,spacing:4,padding:3},e.createElement(O.r,{label:"Switch",selected:X,onChange:()=>q(s=>!s)}),e.createElement(a.Z,{variant:"delta"},E({id:(0,n.O)("SEOPage.info.settings.canonical-url-check"),defaultMessage:"Canonical URL"})))),e.createElement(d.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(S.K,{horizontal:!0,spacing:4,padding:3},e.createElement(O.r,{label:"Switch",selected:_,onChange:()=>ee(s=>!s)}),e.createElement(a.Z,{variant:"delta"},E({id:(0,n.O)("SEOPage.info.settings.keyword-density-check"),defaultMessage:"Keyword Density"})))),e.createElement(d.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(S.K,{horizontal:!0,spacing:4,padding:3},e.createElement(O.r,{label:"Switch",selected:te,onChange:()=>ae(s=>!s)}),e.createElement(a.Z,{variant:"delta"},E({id:(0,n.O)("SEOPage.info.settings.structured-data-check"),defaultMessage:"Structured Data"})))),e.createElement(d.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(S.K,{horizontal:!0,spacing:4,padding:3},e.createElement(O.r,{label:"Switch",selected:ne,onChange:()=>le(s=>!s)}),e.createElement(a.Z,{variant:"delta"},E({id:(0,n.O)("SEOPage.info.settings.alternative-text-check"),defaultMessage:"Alt Text"})))),e.createElement(d.x,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow"},e.createElement(S.K,{horizontal:!0,spacing:4,padding:3},e.createElement(O.r,{label:"Switch",selected:se,onChange:()=>oe(s=>!s)}),e.createElement(a.Z,{variant:"delta"},E({id:(0,n.O)("SEOPage.info.settings.last-updated-at-check"),defaultMessage:"Last Updated At"})))))),e.createElement(ge.m,{startActions:e.createElement(U.z,{onClick:()=>z(s=>!s),variant:"tertiary"},E({id:(0,n.O)("SEOPage.info.settings.cancel.button"),defaultMessage:"Cancel"})),endActions:e.createElement(e.Fragment,null,e.createElement(U.z,{onClick:s=>Pe(s)},E({id:(0,n.O)("SEOPage.info.settings.save.button"),defaultMessage:"Save"})))})))};var he=t(82777),$=t(77296),H=t(42761),Ee=t(96486),J=t.n(Ee);const fe=({contentTypes:o})=>{const{formatMessage:c}=(0,m.Z)();return e.createElement(e.Fragment,null,e.createElement(d.x,{padding:8},e.createElement(he.v,{label:"label",id:"tabs",variant:"simple"},e.createElement($.m,null,e.createElement($.O,null,e.createElement(a.Z,null,c({id:(0,n.O)("SEOPage.tab.collection-type-title"),defaultMessage:"Collection Types"}))),e.createElement($.O,null,e.createElement(a.Z,{variant:"omega"},c({id:(0,n.O)("SEOPage.tab.single-type-title"),defaultMessage:"Single Types"})))),e.createElement(H.n,null,e.createElement(H.x,null,e.createElement(r.i,{colCount:2,rowCount:o.collectionTypes.length},e.createElement(i.h,null,e.createElement(g.Tr,null,e.createElement(y.Th,null,e.createElement(a.Z,{variant:"sigma"},c({id:(0,n.O)("SEOPage.tab-panel.column-name"),defaultMessage:"Name"}))))),e.createElement(b.p,null,o&&o.collectionTypes&&!J().isEmpty(o.collectionTypes)?o.collectionTypes.map(h=>e.createElement(g.Tr,{key:h.uid},e.createElement(y.Td,null,e.createElement(a.Z,{textColor:"neutral800"},h.globalId)),e.createElement(y.Td,null,e.createElement(M.k,{justifyContent:"right",alignItems:"right"},h.seo?e.createElement(V,{item:h}):e.createElement(l.Q,{startIcon:e.createElement(T.Z,null),variant:"secondary",to:`/plugins/content-type-builder/content-types/${h.uid}`},c({id:(0,n.O)("SEOPage.info.add"),defaultMessage:"Add component"})))))):e.createElement(d.x,{padding:8,background:"neutral0"},e.createElement(u.x,{icon:e.createElement(R.w,null),content:c({id:(0,n.O)("SEOPage.info.no-collection-types"),defaultMessage:"You don't have any collection-types yet..."}),action:e.createElement(l.Q,{to:"/plugins/content-type-builder",variant:"secondary",startIcon:e.createElement(T.Z,null)},c({id:(0,n.O)("SEOPage.info.create-collection-type"),defaultMessage:"Create your first collection-type"}))}))))),e.createElement(H.x,null,e.createElement(r.i,{colCount:2,rowCount:o.singleTypes.length},e.createElement(i.h,null,e.createElement(g.Tr,null,e.createElement(y.Th,null,e.createElement(a.Z,{variant:"sigma"},c({id:(0,n.O)("SEOPage.tab-panel.column-name"),defaultMessage:"Name"}))))),e.createElement(b.p,null,o&&o.singleTypes&&!J().isEmpty(o.singleTypes)?o.singleTypes.map(h=>e.createElement(g.Tr,{key:h.uid},e.createElement(y.Td,null,e.createElement(a.Z,{textColor:"neutral800"},h.globalId)),e.createElement(y.Td,null,e.createElement(M.k,{justifyContent:"right",alignItems:"right"},h.seo?e.createElement(V,{item:h}):e.createElement(l.Q,{startIcon:e.createElement(T.Z,null),variant:"secondary",to:`/plugins/content-type-builder/content-types/${h.uid}`},c({id:(0,n.O)("SEOPage.info.add"),defaultMessage:"Add component"})))))):e.createElement(d.x,{padding:8,background:"neutral0"},e.createElement(u.x,{icon:e.createElement(R.w,null),content:c({id:(0,n.O)("SEOPage.info.no-single-types"),defaultMessage:"You don't have any single-types yet..."}),action:e.createElement(l.Q,{to:"/plugins/content-type-builder",variant:"secondary",startIcon:e.createElement(T.Z,null)},c({id:(0,n.O)("SEOPage.info.create-single-type"),defaultMessage:"Create your first single-type"}))})))))))))};var pe=t(53979);const ve=o=>{const{formatMessage:c}=(0,m.Z)();return e.createElement(d.x,{background:"neutral100"},e.createElement(pe.A,{secondaryAction:o?null:e.createElement(LinkButton,{variant:"tertiary",to:"/plugins/content-type-builder/component-categories/shared/shared.seo",startIcon:e.createElement(Pencil,null)},c({id:(0,n.O)("SEOPage.header.button.edit-component"),defaultMessage:"Edit SEO component"})),title:c({id:(0,n.O)("SEOPage.header.title"),defaultMessage:"SEO"}),subtitle:c({id:(0,n.O)("SEOPage.header.subtitle"),defaultMessage:"Optimize your content to be SEO friendly"}),as:"h2"}))},ye=()=>{const{formatMessage:o}=(0,m.Z)(),{lockAppWithAutoreload:c,unlockAppWithAutoreload:h}=(0,v.Vu)(),[B,L]=(0,e.useState)(!0),[k,W]=(0,e.useState)(!1),D=(0,e.useRef)({}),Z=(0,e.useRef)({});return(0,e.useEffect)(()=>{(async()=>{if(D.current=await P(),Z.current=await A(),!D.current)try{c(),await I()}catch(K){console.log(K)}finally{h(),W(!0)}})().then(()=>{L(!1)})},[k]),B?e.createElement(v.dO,null):e.createElement(e.Fragment,null,e.createElement(ve,{seoComponent:D.current}),e.createElement(d.x,{paddingLeft:8,paddingRight:8},e.createElement(v.Y_,{title:o({id:"Information",defaultMessage:"Information"}),subtitle:o({id:(0,n.O)("HomePage.info.information"),defaultMessage:"When adding your SEO component, make sure to name it 'seo' and to include it in the root of your Content-Type."}),icon:e.createElement(G.Z,null),iconBackground:"primary100"})),e.createElement(fe,{contentTypes:Z.current}))},Se=(0,e.memo)(ye);var Oe=t(32141);const xe=()=>e.createElement(v.O4,{permissions:Oe.Z.main},e.createElement("div",null,e.createElement(f.rs,null,e.createElement(f.AW,{path:`/plugins/${x()}`,component:Se,exact:!0}))))},19306:(w,C,t)=>{t.d(C,{M:()=>f});var e=t(1565);const f=e.default.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  grid-gap: ${({theme:v})=>v.spaces[4]};
`},53979:(w,C,t)=>{t.d(C,{A:()=>M,T:()=>A});var e=t(85893),f=t(53547),v=t(1565);const j=l=>{const a=(0,f.useRef)(null),[u,r]=(0,f.useState)(!0),i=([g])=>{r(g.isIntersecting)};return(0,f.useEffect)(()=>{const g=a.current,y=new IntersectionObserver(i,l);return g&&y.observe(a.current),()=>{g&&y.disconnect()}},[a,l]),[a,u]};var x=t(79698);const d=(l,a)=>{const u=(0,x.W)(a);(0,f.useLayoutEffect)(()=>{const r=new ResizeObserver(u);return Array.isArray(l)?l.forEach(i=>{i.current&&r.observe(i.current)}):l.current&&r.observe(l.current),()=>{r.disconnect()}},[l,u])};var m=t(41580),n=t(11047),P=t(75515);const A=l=>{const a=(0,f.useRef)(null),[u,r]=(0,f.useState)(null),[i,g]=j({root:null,rootMargin:"0px",threshold:0});return d(i,()=>{i.current&&r(i.current.getBoundingClientRect())}),(0,f.useEffect)(()=>{a.current&&r(a.current.getBoundingClientRect())},[a]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:u?.height},ref:i,children:g&&(0,e.jsx)(M,{ref:a,...l})}),!g&&(0,e.jsx)(M,{...l,sticky:!0,width:u?.width})]})};A.displayName="HeaderLayout";const I=(0,v.default)(m.x)`
  width: ${({width:l})=>l?`${l/16}rem`:void 0};
  z-index: ${({theme:l})=>l.zIndices[1]};
`,M=f.forwardRef(({navigationAction:l,primaryAction:a,secondaryAction:u,subtitle:r,title:i,sticky:g,width:y,...b},T)=>{const R=typeof r=="string";return g?(0,e.jsx)(I,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:y,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(n.k,{justifyContent:"space-between",children:[(0,e.jsxs)(n.k,{children:[l&&(0,e.jsx)(m.x,{paddingRight:3,children:l}),(0,e.jsxs)(m.x,{children:[(0,e.jsx)(P.Z,{variant:"beta",as:"h1",...b,children:i}),R?(0,e.jsx)(P.Z,{variant:"pi",textColor:"neutral600",children:r}):r]}),u?(0,e.jsx)(m.x,{paddingLeft:4,children:u}):null]}),(0,e.jsx)(n.k,{children:a?(0,e.jsx)(m.x,{paddingLeft:2,children:a}):void 0})]})}):(0,e.jsxs)(m.x,{ref:T,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:l?6:8,background:"neutral100","data-strapi-header":!0,children:[l?(0,e.jsx)(m.x,{paddingBottom:2,children:l}):null,(0,e.jsxs)(n.k,{justifyContent:"space-between",children:[(0,e.jsxs)(n.k,{minWidth:0,children:[(0,e.jsx)(P.Z,{as:"h1",variant:"alpha",...b,children:i}),u?(0,e.jsx)(m.x,{paddingLeft:4,children:u}):null]}),a]}),R?(0,e.jsx)(P.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:r}):r]})})},32064:(w,C,t)=>{t.d(C,{Q:()=>A});var e=t(85893),f=t(53547),v=t(75621),j=t(1565),x=t(92577),d=t(21817),m=t(11047),n=t(75515);const P=(0,j.default)(d.G)`
  &[aria-disabled='true'] {
    ${x.sg}
    &:active {
      ${x.sg}
    }
  }
  &:hover {
    ${x.yP}
  }
  &:active {
    ${x.tB}
  }
  ${x.PD}
`,A=f.forwardRef(({variant:I="default",startIcon:M,endIcon:l,disabled:a=!1,children:u,size:r="S",href:i,to:g,...y},b)=>{const T=i?"_blank":void 0,R=i?"noreferrer noopener":void 0,S=r==="S"?2:"10px",O=4;return(0,e.jsxs)(P,{ref:b,"aria-disabled":a,size:r,variant:I,target:T,rel:R,to:a?void 0:g,href:a?"#":i,background:"buttonPrimary600",borderColor:"buttonPrimary600",hasRadius:!0,gap:2,inline:!0,paddingBottom:S,paddingLeft:O,paddingRight:O,paddingTop:S,pointerEvents:a?"none":void 0,...y,as:g&&!a?v.OL:"a",children:[M&&(0,e.jsx)(m.k,{"aria-hidden":!0,children:M}),(0,e.jsx)(n.Z,{variant:r==="S"?"pi":void 0,fontWeight:"bold",textColor:"buttonNeutral0",children:u}),l&&(0,e.jsx)(m.k,{"aria-hidden":!0,children:l})]})})}}]);
