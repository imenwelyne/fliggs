"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[349],{52713:(I,g,e)=>{e.d(g,{r:()=>T});var t=e(53547),n=e(41580),l=e(45697),E=e.n(l),v=e(99168);function d(f,r,a){if(!f||!r)return{display:"none"};const{x:s,y:o}=a;return{transform:`translate(${s}px, ${o}px)`}}function T({renderItem:f}){const{itemType:r,isDragging:a,item:s,initialOffset:o,currentOffset:y,mouseOffset:O}=(0,v.useDragLayer)(C=>({item:C.getItem(),itemType:C.getItemType(),initialOffset:C.getInitialSourceClientOffset(),currentOffset:C.getSourceClientOffset(),isDragging:C.isDragging(),mouseOffset:C.getClientOffset()}));return a?t.createElement(n.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},t.createElement(n.x,{style:d(o,y,O)},f({type:r,item:s}))):null}T.propTypes={renderItem:E().func.isRequired}},7761:(I,g,e)=>{e.d(g,{pl:()=>f,aY:()=>R,q5:()=>y.q});var t=e(53547),n=e(1784),l=e(18172);const E={data:[],isLoading:!0},d=(w,A)=>(0,l.ZP)(w,h=>{switch(A.type){case"GET_DATA_SUCCEEDED":{h.data=A.data,h.isLoading=!1;break}case"GET_DATA_ERROR":{h.isLoading=!1;break}default:return h}}),f=({ssoEnabled:w})=>{const[A,h]=(0,t.useReducer)(d,E),S=(0,n.lm)(),{get:i}=(0,n.kY)();return(0,t.useEffect)(()=>{(async()=>{try{if(!w){h({type:"GET_DATA_SUCCEEDED",data:[]});return}const{data:p}=await i("/admin/providers");h({type:"GET_DATA_SUCCEEDED",data:p})}catch(p){console.error(p),h({type:"GET_DATA_ERROR"}),S({type:"warning",message:{id:"notification.error"}})}})()},[i,w,S]),A};var r=e(14293),a=e.n(r),s=e(86896),o=e(89548),y=e(71926);const O="strapi-notification-seat-limit",C="https://cloud.strapi.io/profile/billing",M="https://strapi.io/billing/request-seats",R=()=>{const{formatMessage:w}=(0,s.Z)();let{license:A,isError:h,isLoading:S}=(0,y.q)();const i=(0,n.lm)(),{pathname:c}=(0,o.TH)(),{enforcementUserCount:p,permittedSeats:D,licenseLimitStatus:L,isHostedOnStrapiCloud:x}=A;(0,t.useEffect)(()=>{if(h||S)return;const U=!a()(D)&&!window.sessionStorage.getItem(`${O}-${c}`)&&(L==="AT_LIMIT"||L==="OVER_LIMIT");let N;L==="OVER_LIMIT"?N="warning":L==="AT_LIMIT"&&(N="softWarning"),U&&i({type:N,message:w({id:"notification.ee.warning.over-.message",defaultMessage:"Add seats to {licenseLimitStatus, select, OVER_LIMIT {invite} other {re-enable}} Users. If you already did it but it's not reflected in Strapi yet, make sure to restart your app."},{licenseLimitStatus:L}),title:w({id:"notification.ee.warning.at-seat-limit.title",defaultMessage:"{licenseLimitStatus, select, OVER_LIMIT {Over} other {At}} seat limit ({enforcementUserCount}/{permittedSeats})"},{licenseLimitStatus:L,enforcementUserCount:p,permittedSeats:D}),link:{url:x?C:M,label:w({id:"notification.ee.warning.seat-limit.link",defaultMessage:"{isHostedOnStrapiCloud, select, true {ADD SEATS} other {CONTACT SALES}}"},{isHostedOnStrapiCloud:x})},blockTransition:!0,onClose(){window.sessionStorage.setItem(`${O}-${c}`,!0)}})},[i,A,c,w,S,D,L,p,x,h])}},71926:(I,g,e)=>{e.d(g,{q:()=>E});var t=e(53547),n=e(1784),l=e(88767);function E({enabled:v}={enabled:!0}){const{get:d}=(0,n.kY)(),{data:T,isError:f,isLoading:r}=(0,l.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:o}}=await d("/admin/license-limit-information");return o},{enabled:v}),a=T??{},s=t.useCallback(o=>(a?.features??[]).find(O=>O.name===o)?.options??{},[a?.features]);return{license:a,getFeature:s,isError:f,isLoading:r}}},43390:(I,g,e)=>{e.d(g,{eJ:()=>S,lx:()=>A,h4:()=>i,fC:()=>h});var t=e(53547),n=e(17034),l=e(185),E=e(49066),v=e(53979),d=e(1784),T=e(67109),f=e(86896),r=e(52713),a=e(86978),s=e(11047),o=e(75515),y=e(12645),O=e(45697),C=e.n(O),M=e(1565);const P=(0,M.default)(s.k)`
  svg path {
    fill: ${({theme:c})=>c.colors.neutral600};
  }
`;function R({name:c}){return t.createElement(s.k,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,d.Q1)(300)},t.createElement(P,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6},t.createElement(y.Z,{width:`${8/16}rem`})),t.createElement(o.Z,{fontWeight:"bold"},c))}R.propTypes={name:C().string.isRequired};function w({type:c,item:p}){switch(c){case a.uL.STAGE:return t.createElement(R,{...p});default:return null}}function A(){return t.createElement(r.r,{renderItem:w})}function h({children:c}){return t.createElement(n.A,null,t.createElement(l.o,{tabIndex:-1},t.createElement(E.D,null,c)))}function S({href:c}){const{formatMessage:p}=(0,f.Z)();return t.createElement(d.rU,{startIcon:t.createElement(T.Z,null),to:c},p({id:"global.back",defaultMessage:"Back"}))}function i({title:c,subtitle:p,navigationAction:D,primaryAction:L}){return t.createElement(t.Fragment,null,t.createElement(d.SL,{name:c}),t.createElement(v.T,{navigationAction:D,primaryAction:L,title:c,subtitle:p}))}},38705:(I,g,e)=>{e.d(g,{uT:()=>w,fC:()=>S,Dx:()=>R});var t=e(53547),n=e(75515),l=e(11047),E=e(42866),v=e(59946),d=e(41580),T=e(12028),f=e(80994),r=e(70968),a=e(45697),s=e.n(a),o=e(86896),y=e(1565);const O=e.p+"0cd5f8915b265d5b1856.png",C="limits-title",M="https://strapi.io/pricing-cloud",P="https://strapi.io/contact-sales";function R({children:i}){return t.createElement(n.Z,{variant:"alpha",id:C},i)}R.propTypes={children:s().node.isRequired};function w({children:i}){return t.createElement(n.Z,{variant:"omega"},i)}w.propTypes={children:s().node.isRequired};function A(){const{formatMessage:i}=(0,o.Z)();return t.createElement(l.k,{gap:2,paddingTop:4},t.createElement(f.Q,{variant:"default",isExternal:!0,href:M},i({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(f.Q,{variant:"tertiary",isExternal:!0,href:P},i({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const h=y.default.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:i})=>`-${i.spaces[7]}`};
  margin-top: ${({theme:i})=>`-${i.spaces[7]}`};
  width: 360px;
`;function S({children:i,isOpen:c,onClose:p}){const{formatMessage:D}=(0,o.Z)();return c?t.createElement(E.P,{labelledBy:C},t.createElement(v.f,null,t.createElement(l.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(l.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},i,t.createElement(A,null)),t.createElement(l.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(h,{src:O,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(d.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(T.h,{icon:t.createElement(r.Z,null),"aria-label":D({id:"global.close",defaultMessage:"Close"}),onClick:p})))))):null}S.defaultProps={isOpen:!1},S.propTypes={children:s().node.isRequired,isOpen:s().bool,onClose:s().func.isRequired}},86978:(I,g,e)=>{e.d(g,{$k:()=>f,Ef:()=>y,FT:()=>s,Nj:()=>T,Ot:()=>d,VS:()=>r,_X:()=>O,gu:()=>l,lv:()=>a,qZ:()=>E,sN:()=>n,uL:()=>o,x4:()=>v});var t=e(42675);const n="settings_review-workflows",l="Settings/Review_Workflows/RESET_WORKFLOW",E="Settings/Review_Workflows/SET_WORKFLOW",v="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",d="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",T="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",f="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",r="Settings/Review_Workflows/WORKFLOW_UPDATE",a={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},s=t.W.colors.primary600,o={STAGE:"stage"},y="numberOfWorkflows",O="stagesPerWorkflow"},52258:(I,g,e)=>{e.d(g,{n:()=>l});var t=e(1784),n=e(88767);function l(E={}){const{get:v}=(0,t.kY)(),{id:d="",...T}=E,f={populate:"stages"},{data:r,isLoading:a,status:s,refetch:o}=(0,n.useQuery)(["review-workflows","workflows",d],async()=>(await v(`/admin/review-workflows/workflows/${d}`,{params:{...f,...T}})).data);let y=[];return d&&r?.data?y=[r.data]:Array.isArray(r?.data)&&(y=r.data),{meta:r?.meta??{},workflows:y,isLoading:a,status:s,refetch:o}}},26259:(I,g,e)=>{e.r(g),e.d(g,{default:()=>z});var t=e(53547),n=e(1784),l=e(86706),E=e(36364),v=e(11047),d=e(77197),T=e(38939),f=e(49386),r=e(8060),a=e(79031),s=e(37909),o=e(75515),y=e(63237),O=e(15234),C=e(12028),M=e(96315),P=e(4585),R=e(20022),w=e(86896),A=e(88767),h=e(89548),S=e(1565),i=e(92686),c=e(7761),p=e(43390),D=e(38705),L=e(86978),x=e(52258);const U=(0,S.default)(n.rU)`
  align-items: center;
  height: ${(0,n.Q1)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:u})=>`${u.spaces[2]}}`};
  width: ${(0,n.Q1)(32)};

  svg {
    height: ${(0,n.Q1)(12)};
    width: ${(0,n.Q1)(12)};

    path {
      fill: ${({theme:u})=>u.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:u})=>u.colors.neutral800};
      }
    }
  }
`;function N(){const{formatMessage:u}=(0,w.Z)(),{push:j}=(0,h.k6)(),{collectionTypes:J,singleTypes:b,isLoading:q}=(0,i.G)(),{meta:k,workflows:K,isLoading:F,refetch:_}=(0,x.n)(),[Q,G]=t.useState(null),[ee,B]=t.useState(!1),{del:te}=(0,n.kY)(),{formatAPIError:ne}=(0,n.So)(),H=(0,n.lm)(),{getFeature:se,isLoading:V}=(0,c.q5)(),{trackUsage:Y}=(0,n.rS)(),ae=(0,l.v9)(E._),{allowedActions:{canCreate:X,canDelete:oe}}=(0,n.ss)(ae.settings["review-workflows"]),W=se("review-workflows"),{mutateAsync:le,isLoading:re}=(0,A.useMutation)(async({workflowId:m,stages:$})=>{const{data:{data:Z}}=await te(`/admin/review-workflows/workflows/${m}`,{data:$});return Z},{onSuccess(){H({type:"success",message:{id:"notification.success.deleted",defaultMessage:"Deleted"}})}}),ie=m=>[...J,...b].find(Z=>Z.uid===m).info.displayName,de=m=>{G(m)},ce=()=>{G(null)},ue=async()=>{try{const m=await le({workflowId:Q});return await _(),G(null),m}catch(m){return H({type:"warning",message:ne(m)}),null}};return t.useEffect(()=>{!F&&!V&&W?.[L.Ef]&&k?.workflowCount>parseInt(W[L.Ef],10)&&B(!0)},[V,F,W,k?.workflowCount,k.workflowsTotal]),t.createElement(t.Fragment,null,t.createElement(p.h4,{primaryAction:X&&t.createElement(n.Qj,{startIcon:t.createElement(M.Z,null),size:"S",to:"/settings/review-workflows/create",onClick:m=>{W?.[L.Ef]&&k?.workflowCount>=parseInt(W[L.Ef],10)?(m.preventDefault(),B(!0)):Y("willCreateWorkflow")}},u({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),subtitle:u({id:"Settings.review-workflows.list.page.subtitle",defaultMessage:"Manage your content review process"}),title:u({id:"Settings.review-workflows.list.page.title",defaultMessage:"Review Workflows"})}),t.createElement(p.fC,null,F||q?t.createElement(v.k,{justifyContent:"center"},t.createElement(d.a,null,u({id:"Settings.review-workflows.page.list.isLoading",defaultMessage:"Workflows are loading"}))):t.createElement(T.i,{colCount:3,footer:X&&t.createElement(f.c,{icon:t.createElement(M.Z,null),onClick:()=>{W?.[L.Ef]&&k?.workflowCount>=parseInt(W[L.Ef],10)?B(!0):(j("/settings/review-workflows/create"),Y("willCreateWorkflow"))}},u({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),rowCount:1},t.createElement(r.h,null,t.createElement(a.Tr,null,t.createElement(s.Th,null,t.createElement(o.Z,{variant:"sigma"},u({id:"Settings.review-workflows.list.page.list.column.name.title",defaultMessage:"Name"}))),t.createElement(s.Th,null,t.createElement(o.Z,{variant:"sigma"},u({id:"Settings.review-workflows.list.page.list.column.stages.title",defaultMessage:"Stages"}))),t.createElement(s.Th,null,t.createElement(o.Z,{variant:"sigma"},u({id:"Settings.review-workflows.list.page.list.column.contentTypes.title",defaultMessage:"Content Types"}))),t.createElement(s.Th,null,t.createElement(y.T,null,u({id:"Settings.review-workflows.list.page.list.column.actions.title",defaultMessage:"Actions"}))))),t.createElement(O.p,null,K.map(m=>t.createElement(a.Tr,{...(0,n.X7)({fn($){$.target.nodeName!=="BUTTON"&&j(`/settings/review-workflows/${m.id}`)}}),key:`workflow-${m.id}`},t.createElement(s.Td,{width:(0,n.Q1)(250)},t.createElement(o.Z,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0},m.name)),t.createElement(s.Td,null,t.createElement(o.Z,{textColor:"neutral800"},m.stages.length)),t.createElement(s.Td,null,t.createElement(o.Z,{textColor:"neutral800"},(m?.contentTypes??[]).map(ie).join(", "))),t.createElement(s.Td,null,t.createElement(v.k,{alignItems:"center",justifyContent:"end"},t.createElement(U,{to:`/settings/review-workflows/${m.id}`,"aria-label":u({id:"Settings.review-workflows.list.page.list.column.actions.edit.label",defaultMessage:"Edit {name}"},{name:m.name})},t.createElement(P.Z,null)),K.length>1&&oe&&t.createElement(C.h,{"aria-label":u({id:"Settings.review-workflows.list.page.list.column.actions.delete.label",defaultMessage:"Delete {name}"},{name:"Default workflow"}),icon:t.createElement(R.Z,null),noBorder:!0,onClick:()=>{de(m.id)}}))))))),t.createElement(n.QH,{bodyText:{id:"Settings.review-workflows.list.page.delete.confirm.body",defaultMessage:"If you remove this worfklow, all stage-related information will be removed for this content-type. Are you sure you want to remove it?"},isConfirmButtonLoading:re,isOpen:!!Q,onToggleDialog:ce,onConfirm:ue}),t.createElement(D.fC,{isOpen:ee,onClose:()=>B(!1)},t.createElement(D.Dx,null,u({id:"Settings.review-workflows.list.page.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),t.createElement(D.uT,null,u({id:"Settings.review-workflows.list.page.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."})))))}function z(){const u=(0,l.v9)(E._);return t.createElement(n.O4,{permissions:u.settings["review-workflows"].main},t.createElement(N,null))}},49386:(I,g,e)=>{e.d(g,{c:()=>r});var t=e(85893),n=e(1565),l=e(41580),E=e(70004),v=e(11047),d=e(75515);const T=(0,n.default)(l.x)`
  height: ${24/16}rem;
  width: ${24/16}rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:a})=>a.colors.primary600};
  }
`,f=(0,n.default)(l.x)`
  border-radius: 0 0 ${({theme:a})=>a.borderRadius} ${({theme:a})=>a.borderRadius};
  display: block;
  width: 100%;
  border: none;
`,r=({children:a,icon:s,...o})=>(0,t.jsxs)("div",{children:[(0,t.jsx)(E.i,{}),(0,t.jsx)(f,{as:"button",background:"primary100",padding:5,...o,children:(0,t.jsxs)(v.k,{children:[(0,t.jsx)(T,{"aria-hidden":!0,background:"primary200",children:s}),(0,t.jsx)(l.x,{paddingLeft:3,children:(0,t.jsx)(d.Z,{variant:"pi",fontWeight:"bold",textColor:"primary600",children:a})})]})})]})}}]);
